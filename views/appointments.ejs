<%- include("partials/header"); -%>


    
<div class="container" style="position: relative; top: 215px; ">
    <div class="input-group">
        <input type="text" id="myInput" class="form-control" onkeyup="myFunction()" placeholder="Search for patients names.." title="Type in a name">
        <span class="input-group-btn" 
            style="width:0px;"></span>
        <input type="text" id="myInput2" class="form-control" onkeyup="myFunction2()" placeholder="Search for doctors names.." title="Type in a name">
    </div>

	<div class="row" style="position: relative; top: 10px; left: -70px;">
        
	<table id="example" class="table table-striped table-bordered" style="width:100%">
        <thead>
            
            <tr>
               <form action="/appointments" method="post">
                    <th><input type="date" placeholder="Enter Date " name="date"></th>
                    <th><input type="time" id="appt" name="time"
                        min="09:00" max="18:00" required></th>
                    <th><input type="text" placeholder="Enter Patient" name="patient"></th>
                    <th><input type="text" placeholder="Enter diagnostic" name="diagnostic"></th>
                    <th><input type="text" placeholder="Enter Doctor" name="doctor"></th>
                    <th><input type="text" placeholder="Enter Price" name="price"></th>
                    <th><button class="btn btn-primary btn-lg btn-block" type="submit" style="position: relative; top: -17px;"">+</button></th>
                </form>
                
            </tr>
            <tr>
                
                <th>Date</th>
                <th>Time</th>
                <th>Patient</th>
                <th>Diagnostic</th>
                <th>Doctor</th>
                <th>Price(dt)</th>
            </tr>
        </thead>
        <tbody>
        <% for(let i=0; i<appArray.length ; i++) {%>
            <tr>
                 
                <td><%= appArray[i].dateOfAppoitnment%></td>
                <td><%=appArray[i].timeOfAppoitment%> </td>
                <td><%=appArray[i].patient%></td>
                <td><%=appArray[i].diagnostic%></td>
                <td><%=appArray[i].doctor%></td>
                <td><%=appArray[i].price%></td>
                <form action="/delete" method="post">
                    <td><a class="tooltips" data-toggle="tooltip" data-placement="top" title="Delete">
                        <button type="submit" name="deleteBtn" onclick="return confirm('Are you sure to delete this appointment ?');" value="<%=appArray[i]._id%>" style="border: 0; background: none;">
                            <i class="fa fa-trash fa-2x" aria-hidden="true" style="position: relative; left: 3px;"></i>
                        </button>
              
                     </a></td>
                    
                </form>
            </tr>
            <%};%>
        </tbody>
        
    </table>
    <script>
        function myFunction() {
          var input, filter, table, tr, td, i, txtValue;
          input = document.getElementById("myInput");
          filter = input.value.toUpperCase();
          table = document.getElementById("example");
          tr = table.getElementsByTagName("tr");
          for (i = 0; i < tr.length; i++) {
            td = tr[i].getElementsByTagName("td")[2];
            if (td) {
              txtValue = td.textContent || td.innerText;
              if (txtValue.toUpperCase().indexOf(filter) > -1) {
                tr[i].style.display = "";
              } else {
                tr[i].style.display = "none";
              }
            }       
          }
        }
        
        function myFunction2() {
          var input, filter, table, tr, td, i, txtValue;
          input = document.getElementById("myInput2");
          filter = input.value.toUpperCase();
          table = document.getElementById("example");
          tr = table.getElementsByTagName("tr");
          for (i = 0; i < tr.length; i++) {
            td = tr[i].getElementsByTagName("td")[4];
            if (td) {
              txtValue = td.textContent || td.innerText;
              if (txtValue.toUpperCase().indexOf(filter) > -1) {
                tr[i].style.display = "";
              } else {
                tr[i].style.display = "none";
              }
            }       
          }
        }
        </script>
	</div>
</div>

<%- include("partials/footer"); -%>